
@{
    ViewBag.Title = "BackTesting001";
}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<style>
    #nav-tabContent {
        border: 11px solid rgba(71,164,85,0.25);
        border-radius: 40px 40px 40px 40px;
        margin: 15px;
        padding: 15px;
    }
</style>
<div class="container " style="width:450px">
    <nav>
        <div class="nav nav-tabs container" id="nav-tab" role="tablist">
            <a class="nav-link active" id="nav-backTest001-tab" data-toggle="tab" href="#nav-backTest001" role="tab" aria-controls="nav-backTest001" aria-selected="true">定期定額</a>
            <a class="nav-link" id="nav-backTest002-tab" data-toggle="tab" href="#nav-backTest002" role="tab" aria-controls="nav-backTest002" aria-selected="false">定期定股</a>
        </div>
    </nav>

    @* 定期定額 *@
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active " id="nav-backTest001" role="tabpanel" aria-labelledby="nav-backTest001-tab">
            <form  method="post">
                <h2>定期定額</h2>
                <table>
                    <tr>
                        <td>股票標的</td>
                        <td>
                            <input type="text" name="stockID" placeholder="輸入股票代碼" id="stockID1" value="2330"/>
                        </td>
                    </tr>
                    <tr>
                        <td>幾號投入</td>
                        <td>
                            <input type="text" name="day" placeholder="填入日期" id="day1" value="5"/>
                        </td>
                    </tr>
                    <tr>
                        <td>固定投入多少錢</td>
                        <td>
                            <input type="text" name="totalUnit" placeholder="填入金額" id="totalUnit1" value="80000"/>
                        </td>
                    </tr>
                </table>
                <input type="submit" name="name1" value="送出" id="submit1" formaction="/BackTesting/BackTestingRes002"/>
                <br /><br /><br />
            </form>
        </div>

        @* 定期定股 *@
        <div class="tab-pane fade" id="nav-backTest002" role="tabpanel" aria-labelledby="nav-backTest002-tab">
            <form action="/BackTesting/BackTesting001" method="post">
                <h2>定期定股</h2>
                <table>
                    <tr>
                        <td>股票標的</td>
                        <td>
                            <input type="text" name="stockID" placeholder="輸入股票代碼" id="stockID2" value="2454"/>
                        </td>
                    </tr>
                    <tr>
                        <td>幾號投入</td>
                        <td>
                            <input type="text" name="day" placeholder="填入日期" id="day2" value="25"/>
                        </td>
                    </tr>
                    <tr>
                        <td>固定買幾股</td>
                        <td>
                            <input type="text" name="totalUnit" placeholder="填入數量" id="totalUnit2"value="50"/>
                        </td>
                    </tr>
                </table>
                <input type="submit" name="name2" value="送出" id="submit2" formaction="/BackTesting/BackTestingRes001"/>
                <br /><br /><br />
            </form>
        </div>

        <div id="result">
            <h3>計算結果</h3>
            <table id="resultTable" style="display: none">
                <tr>
                    <td>投資標的</td>
                    <td id="result_1">@($"{ViewBag.stockID2} {ViewBag.stockName2}")</td>
                </tr>
                <tr>
                    <td id="result_2">每月@(ViewBag.day2)號固定投入</td>
                    <td id="result_3">@(ViewBag.count2)新台幣</td>
                </tr>
                <tr>
                    <td>總付出成本(新台幣)</td>
                    <td id="result_4">@ViewBag.total_cost2</td>
                </tr>
                <tr>
                    <td>當前市值</td>
                    <td id="result_5">@ViewBag.nowTotalVal2</td>
                </tr>
                <tr>
                    <td>未實現損益/百分比</td>
                    <td id="result_6">@ViewBag.profit_and_loss2/@ViewBag.percentage2%</td>
                </tr>
            </table>
        </div>
    </div>

</div>

@*visibility:hidden*@
<script src="/Scripts/jquery-3.4.1.js"></script>
<script>

    $('#submit2').click(function () {
        console.log('定期定股')
        var data = {
            stockID: $('#stockID2').val(),
            day: $('#day2').val(),
            totalUnit: $('#totalUnit2').val()
        }
        $.ajax({
            type: "post",
            url: "/BackTesting/BackTestingRes002",
            data: data
        }).then(function (e) {
            $('#result_1').text(`${e.stockID}${e.stockName}`);
            $('#result_2').text(`每月${e.day}號固定買進`);
            $('#result_3').text(`${e.count}股`);
            $('#result_4').text(`${e.total_cost}`);
            $('#result_5').text(`${e.nowTotalVal}`);
            $('#result_6').text(`${e.profit_and_loss}/${e.percentage}`);
        })
        $("#basktestRes001").css("resultTable", "block");
    })
    $('#submit1').click(function () {
        console.log('定期定額')
        var data = {
            stockID: $('#stockID1').val(),
            day: $('#day1').val(),
            totalUnit: $('#totalUnit1').val()
        }
        $.ajax({
            type: "post",
            url: "/BackTesting/BackTestingRes001",
            data: data
        }).then(function (e) {
            $('#result_1').text(`${e.stockID}${e.stockName}`);
            $('#result_2').text(`每月@(ViewBag.day)號投入`);
            $('#result_3').text(`${e.count}新台幣`);
            $('#result_4').text(`${e.total_cost}`);
            $('#result_5').text(`${e.nowTotalVal}`);
            $('#result_6').text(`${e.profit_and_loss}/${e.percentage}`);
        })
        $("#basktestRes002").css("resultTable", "block");
    })
</script>