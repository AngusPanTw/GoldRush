
@{
    ViewBag.Title = "BackTesting001";
}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<style>
    #nav-tabContent {
        border: 11px solid rgba(71,164,85,0.25);
        border-radius: 40px 40px 40px 40px;
        margin: 15px;
        padding: 15px;
    }
    .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
        color: #495057;
        background-color: white;
        border-color: rgba(71,164,85,0.25);
        color: green;
    }
    .nav-tabs .nav-link {
        border: 5px solid transparent;
    }
    .nav-link{
        color:black
    }
</style>
<div class="container " style="width:450px">
    <nav>
        <div class="nav nav-tabs container" id="nav-tab" role="tablist">
            <a class="nav-link active" id="nav-backTest001-tab" data-toggle="tab" href="#nav-backTest001" role="tab" aria-controls="nav-backTest001" aria-selected="true">定期定額</a>
            <a class="nav-link " id="nav-backTest002-tab" data-toggle="tab" href="#nav-backTest002" role="tab" aria-controls="nav-backTest002" aria-selected="false">定期定股</a>
        </div>
    </nav>
    @* 定期定額 *@
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active " id="nav-backTest001" role="tabpanel" aria-labelledby="nav-backTest001-tab">
            <h2>定期定額</h2>
            <table>
                <tr>
                    <td>股票標的</td>
                    <td>
                        <input type="text" name="stockID" placeholder="輸入股票代碼" id="stockID1"/>
                    </td>
                </tr>
                <tr>
                    <td>幾號投入</td>
                    <td>
                        <input type="text" name="day" placeholder="填入日期" id="day1" />
                    </td>
                </tr>
                <tr>
                    <td>固定投入多少錢</td>
                    <td>
                        <input type="text" name="totalUnit" placeholder="填入金額" id="totalUnit1" />
                    </td>
                </tr>
            </table>
            <button type="button" name="name1" id="submit1">送出</button>
            <br /><br /><br />
        </div>

        @* 定期定股 *@
        <div class="tab-pane fade" id="nav-backTest002" role="tabpanel" aria-labelledby="nav-backTest002-tab">
            <h2>定期定股</h2>
            <table>
                <tr>
                    <td>股票標的</td>
                    <td>
                        <input type="text" name="stockID" placeholder="輸入股票代碼" id="stockID2"/>
                    </td>
                </tr>
                <tr>
                    <td>幾號投入</td>
                    <td>
                        <input type="text" name="day" placeholder="填入日期" id="day2"/>
                    </td>
                </tr>
                <tr>
                    <td>固定買幾股</td>
                    <td>
                        <input type="text" name="totalUnit" placeholder="填入數量" id="totalUnit2"/>
                    </td>
                </tr>
            </table>
            <button type="button" id="submit2">送出</button>
            <br /><br /><br />
        </div>

        <div id="result" style="display: none">
            <h3>計算結果</h3>
            <table id="resultTable">
                <tr>
                    <td>投資標的</td>
                    <td id="result_1">股票代號 名稱</td>
                </tr>
                <tr>
                    <td id="result_2">每月x號固定投入/每月x號固定買進x2</td>
                    <td id="result_3">y新台幣/y2股</td>
                </tr>
                <tr>
                    <td>總付出成本(新台幣)</td>
                    <td id="result_4">總成本</td>
                </tr>
                <tr>
                    <td>當前市值</td>
                    <td id="result_5">市值</td>
                </tr>
                <tr>
                    <td>未實現損益</td>
                    <td id="result_6">未實現損益</td>
                </tr>
                <tr>
                    <td>預估報酬率</td>
                    <td id="result_7">百分比%</td>
                </tr>
            </table>
        </div>
    </div>
</div>

@*visibility:hidden*@
<script src="/Scripts/jquery-3.4.1.js"></script>
<script>
    $('#submit2').click(function () {
        console.log('定期定股')
        var data = {
            stockID: $('#stockID2').val(),
            day: $('#day2').val(),
            totalUnit: $('#totalUnit2').val()
        }
        $.ajax({
            async: "false",
            type: "post",
            url: "/BackTesting/BackTestingRes001",
            data: data
        }).then(function (e) {
            $('#result_1').text(`${e.stockID}${e.stockName}`);
            $('#result_2').text(`每月${e.day}號固定買進`);
            $('#result_3').text(`${e.count}股`);
            $('#result_4').text(`${e.total_cost}`);
            $('#result_5').text(`${e.nowTotalVal}`);
            $('#result_6').text(`${e.profit_and_loss}`);
            $('#result_7').text(`${e.percentage}%`);
            $("#result").css("display", "block");
        })
    })
    $('#submit1').click(function () {
        console.log('定期定額')
        var res1; var res2; var res3; var res4; var res5; var res6; var res7; var res8;
        var data = {
            stockID: $('#stockID1').val(),
            day: $('#day1').val(),
            totalUnit: $('#totalUnit1').val()
        }

        var result = $.ajax({
            async: "false",
            type: "post",
            url: "/BackTesting/BackTestingRes002",
            data: data
        }).then(function (e) {
            $('#result_1').text(`${e.stockID}${e.stockName}`);
            $('#result_2').text(`每月${e.day}號投入`);
            $('#result_3').text(`${e.count}新台幣`);
            $('#result_4').text(`${e.total_cost}`);
            $('#result_5').text(`${e.nowTotalVal}`);
            $('#result_6').text(`${e.profit_and_loss}`);
            $('#result_7').text(`${e.percentage}%`);
            $("#result").css("display", "block");
        })
    })
</script>